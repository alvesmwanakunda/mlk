<app-navbar>
  <div class="container">
    <h2 class="content-title">Discussion</h2>
    <mat-divider></mat-divider>

    <div class="chat-content">
       <div class="row">
         <div class="col-8">
            <div class="row" *ngFor="let m of messages" style="margin-bottom: 15px;">
               <div class="col-1">
                <div [ngClass]="m.isAdmin ? 'chat-receveid' : 'chat-user'">
                  <span class="chat-short-name" *ngIf="!m.isAdmin">{{m?.senderId?.nom.substring(0, 1)}}</span>
                  <span class="chat-short-name" *ngIf="m.isAdmin">{{m?.receviedId?.nom.substring(0, 1)}}</span>
                </div>
               </div>
               <div class="col-11">
                  <p>
                    <span class="chat-user-name" *ngIf="!m.isAdmin">{{m?.senderId?.nom}}</span>
                    <span class="chat-user-name" *ngIf="m.isAdmin">{{m?.receviedId?.nom}}</span>
                    <span class="chat-date"> - {{m?.createdAt|dataAsAgo}}</span>
                  </p>
                  <div [ngClass]="m.isAdmin ? 'alert alert-info' : 'alert alert-primary'" role="alert">
                    {{m?.message}}
                  </div>
               </div>
            </div>
         </div>
         <div class="col-4"></div>
       </div>
    </div>
    <div class="chat-box">
      <div class="row">
        <div class="col">
          <div class="card" style="border: 1px solid #f2f4f9!important;border-radius: 7px!important;">
            <div class="card-body">

              <div class="row">
                <div class="col-10">
                  <form [formGroup]="chatForm">
                    <input class="form-control shadow-none chat-input" formControlName="message" placeholder="Message"/>
                  </form>
                </div>
                <div class="col-2">
                  <div align="right" style="padding-top: 5px;">
                    <button  mat-button  (click)="sendMessage()" [disabled]="chatForm.invalid">Envoyer</button>
                  </div>
                </div>
              </div>

            </div>
          </div>

        </div>
      </div>
    </div>


  </div><!--content-->

</app-navbar>
